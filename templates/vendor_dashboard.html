{% extends 'base1.html' %}

{% load static %}
{%block title %} Vendor Dashboard{% endblock %}

{% block content %}

<main class="main-content min-vh-100 col-md-9 ms-sm-auto col-lg-10 px-md-4">
    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h2">Vendor Dashboard</h1>
        <div class="right-side">
            <a href="{% url 'add_product' %}" class="btn btn-primary">Add Product</a>
        </div>
    </div>
    <section>
        <h3>Manage Solar Panels</h3>
        <table class="table">
            <thead>
                <tr>
                    <th>Product Name</th>
                    <th>Price/kW</th>
                    <th>Stock Quantity</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for product in products %}
                <tr>
                    <td>{{ product.name }}</td>
                    <td>Â£{{ product.price }}</td>
                    <td>{{ product.stock_quantity }}</td>
                    <td>
                        <a href="{% url 'view_product' product.id %}" class="btn btn-sm btn-info">View</a>
                        <a href="{% url 'edit_product' product.id %}" class="btn btn-sm btn-warning">Edit</a>
                        <a href="{% url 'delete_product' product.id %}" class="btn btn-sm btn-danger">Delete</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </section>
</br>
    <!-- Active Orders Table -->
    <section>
        <h3>Active Orders</h3>
        <table class="table">
            <thead>
                <tr>
                    <th>Customer Name</th>
                    <th>Solar Panel Ordered</th>
                    <th>Quantity</th>
                    <th>Order Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for order in active_orders %}
                <tr>
                    <td>{{ order.customer_profile.user.username }}</td>
                    <td>{{ order.product.name }}</td>
                    <td>{{ order.quantity }}</td>
                    <td>{{ order.status }}</td>
                    <td>
                        <a href="{% url 'update_order_status' order.id %}" class="btn btn-sm btn-info">Update Status</a>
                        <a href="{% url 'view_order_details' order.id %}" class="btn btn-sm btn-secondary">View Details</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </section>
</br>
    <!-- Quotes Requests Table -->
    <section>
        <h3>Quote Requests</h3>
        <table class="table">
            <thead>
                <tr>
                    <th>Customer Name</th>
                    <th>Estimation Details</th>
                    <th>Quote Deadline</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for quote in quote_requests %}
                    <tr>
                        <td>{{ quote.customer_profile.user.username }}</td>
                        <td>{{ quote.estimation_details }}</td>
                        <td>{{ quote.quote_deadline }}</td>
                        <td>
                            <a href="{% url 'submit_quote' quote.id %}" class="btn btn-primary">Submit Quote</a>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </section>

</main>
{% endblock %}